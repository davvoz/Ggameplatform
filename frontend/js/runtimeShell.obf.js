const a0_0x169eac=a0_0x1e01;function a0_0x536a(){const _0x3decd6=['sendProgressResponse','then','success','handleGameOver','Game\x20Over\x20-\x20Final\x20Score:\x20','processMessageQueue','EPcTA','GAME_OVER','iframe','ðŸ“Š\x20Extra\x20data:','scrollTo','extra_data','AkyOG','cCikm','score','âŒ\x20Exception\x20loading\x20progress:','add','status','string','jdczN','metamask-inpage','timeout','nuCQn','exit','location','RuntimeShell\x20initialized\x20and\x20listening\x20for\x20messages','rQxNp','bCXNO','loadProgress','55UxebsR','resetSession','eventHandlers','zwWiN','âŒ\x20Exception\x20saving\x20progress:','nJwQe','dvwyq','âœ…\x20Session\x20reset\x20complete','push','querySelector','endGameSession','WeFue','pnutH','object','âš ï¸\x20No\x20sessionId\x20-\x20game\x20ended\x20before\x20session\x20was\x20created','showPauseOverlay','ðŸ”„\x20Resetting\x20session\x20for\x20restart...','VCcIX','Payload\x20to\x20send\x20to\x20backend:','Rejected\x20invalid\x20message\x20format:','XvkXh','START','jNzdJ','MSStream','YimeQ','preventDefault','showLevelUpNotification','ðŸ“Š\x20Current\x20state.score\x20before\x20update:','createElement','Unknown\x20message\x20type:','âœ…\x20Creating\x20new\x20session\x20for\x20restart...','IIZEh','Score:','http://localhost:8000','off','nvloj','Game\x20session\x20ended\x20via\x20beacon','Game\x20session\x20ended:','akluY','â¸ï¸\x20Game\x20ready,\x20waiting\x20for\x20game\x20start\x20to\x20create\x20session...','bBHHp','zkwyy','clear','time','username','CONFIG','saveProgress','classList','Pausing\x20game','UfOgH','removeEventListener','outerHeight','isReady','Cleanup:\x20Ending\x20active\x20session','ios-fullscreen-exit-btn','var(--success)','Game\x20not\x20ready,\x20queuing\x20message:','PchoH','isLoggedIn','msYyA','Backend\x20response\x20status:','msExitFullscreen','createIOSExitButton','xp_earned','OOvZu','âœ…\x20Game\x20session\x20started:','sessionId','âŒ\x20Config\x20or\x20API_URL\x20not\x20available','length','JlQbx','JWxrD','getElementById','duration_seconds','remove','test','Entered\x20iOS\x20fullscreen\x20mode','null','Response\x20data:','oBvKz','start','requestFullScreen','metamask-provider','CFJpt','survival_time','stringify','ULpbg','gameId','log','âœ…\x20No\x20active\x20session\x20(already\x20ended\x20by\x20Game\x20Over)','oNASW','Kibey','sendBeacon','msFullscreenElement','outerWidth','Response\x20status:','currentUser','GAME_STARTED','ðŸŽ®\x20Game\x20started,\x20creating\x20session...','json','ozkKu','JCdCv','endGameSessionById','EXIT','var(--error)','payload','Starting\x20game','progress_data','user_id','QKHiX','needsNewSession','userAgent','level','currentScore','sMswx','IeNeA','Wyikp','contentWindow','Level\x20completed:','handleLoadProgress','7cCyRLc','BeGVk','RESET_SESSION','handleScoreUpdate','tHPsi','kills','enemies_killed','jlaJW','YPfIn','maxTouchPoints','SZthk','updateScoreDisplay','oxlls','body','origin','Lkjly','handleReady','OoYoU','nrleB','Cannot\x20send\x20message:\x20iframe\x20contentWindow\x20not\x20available','inWYE','is_anonymous','yMgfS','innerHeight','progressLoaded','forEach','current-score','handleSaveProgress','FmamF','ryZzy','allowedOrigins','XFSDc','overflow','API_URL','contains','protocolVersion','display','oxnMV','ePaQF','postMessage','4|1|3|0|2','Failed\x20to\x20end\x20game\x20session:','exitIOSFullscreen','_requestId','FPFSr','application/json','session_id','â°\x20Session\x20start\x20time:','1058910vaplMD','runtimeShellInstance','AuthManager','handleLevelCompleted','kFmZH','split','Processing\x20message\x20queue:','Duration:','BGglX','DsJvG','Error\x20in\x20event\x20handler:','resume','ðŸ“¡\x20Sending\x20session\x20start\x20request\x20to\x20backend...','cleanup','189nvXXpo','msRequestFullscreen','levelCompleted','13256mDQIiT','KfMrW','nLLvm','aRYnl','LOAD_PROGRESS','state','1pcQoTr','webkitRequestFullscreen','KkSvm','includes','qyJtz','.navbar','âŒ\x20No\x20user\x20logged\x20in,\x20skipping\x20session\x20tracking','Entering\x20native\x20fullscreen','showLevelCompleteOverlay','dispatchEvent','parentElement','button','OTvhp','isValidMessage','init','xgXYR','3sTvXZL','sBdSX','has','LfjFP','cflNF','lgzDW','textContent','dEhqd','handleMessage','DsRIJ','messages','vasxP','ktFoQ','showCur8Notification','Game\x20Paused','boundMessageHandler','âœ…\x20Progress\x20saved','XElQo','Exiting\x20game\x20-\x20no\x20XP\x20will\x20be\x20awarded','isValidOrigin','removeIOSExitButton','ðŸŽ®\x20Game\x20restarted\x20detected\x20(score=0\x20after\x20game\x20over)','cHjHG','type','webkitFullscreenEnabled','YdkYt','ukTCn','requestFullscreen','Playing','LEVEL_COMPLETED','jOpmy','fuNor','sessionStartTime','debug','JCzXM','messageQueue','handleFullscreenRequest','1286310lpOGsZ','http://localhost:3000','\x20Complete!','âœ…\x20SessionId\x20exists,\x20ending\x20session:','READY','exitFullscreen','zBCaM','floor','3|1|2|4|0','fullscreenEnabled','Game\x20is\x20ready:','TjnCz','zxvHi','enterIOSFullscreen','level_up','âŒ\x20Exception\x20in\x20startGameSession:','MjWwO','SCORE_UPDATE','player_level','MacIntel','message','ios-fullscreen','LOG','PAUSE','indexOf','ZNOIi','enableIOSFullscreenFallback','style','PUT','.game-status','Ending\x20session\x20-\x20Session\x20ID:','click','gameOver','getUser','error','518168hYcwMp','KhQFG','COivA','XuJQu','innerHTML','isPaused','4|0|1|3|2','Iframe\x20loaded,\x20waiting\x20for\x20game\x20ready\x20signal...','mQNrf','isGameOver','progress','ðŸŽ¯\x20GameOver\x20payload\x20received:','gameStarted','set','/users/sessions/start','281440GLTyzK','JLEBP','webkitExitFullscreen','appendChild','pause','game_data','KQwlx','config','emit','sendMessage','1074284YQdYvP','now','color','ueWFs','/users/game-progress/','/users/sessions/end','startGameSession','RuntimeShell\x20initialized\x20for\x20game:','target','setAttribute','MROOw','zBpbb','DkZHr','oPdrb','POST','sendConfig','gameSessionEnded','get','parse','undefined','number','GVMln','aXthT','session','xp_breakdown','RmUhU','MPuWv','showGameOverOverlay','getItem','uaKdX','aria-label','AGLlJ','Received\x20message:','ios-fullscreen-active','286872tLdvBv','lRLkS','SAVE_PROGRESS','KiNIG'];a0_0x536a=function(){return _0x3decd6;};return a0_0x536a();}(function(_0x55edb5,_0x497d75){const _0x359a1f=a0_0x1e01,_0x5991b1=_0x55edb5();while(!![]){try{const _0xbdd93c=-parseInt(_0x359a1f(0xd8))/0x1*(parseInt(_0x359a1f(0x130))/0x2)+parseInt(_0x359a1f(0xe8))/0x3*(parseInt(_0x359a1f(0x149))/0x4)+parseInt(_0x359a1f(0x10d))/0x5+parseInt(_0x359a1f(0xc1))/0x6*(-parseInt(_0x359a1f(0x91))/0x7)+-parseInt(_0x359a1f(0xd2))/0x8*(parseInt(_0x359a1f(0xcf))/0x9)+parseInt(_0x359a1f(0x13f))/0xa*(parseInt(_0x359a1f(0x18c))/0xb)+-parseInt(_0x359a1f(0x16b))/0xc;if(_0xbdd93c===_0x497d75)break;else _0x5991b1['push'](_0x5991b1['shift']());}catch(_0x352fb9){_0x5991b1['push'](_0x5991b1['shift']());}}}(a0_0x536a,0x2a0f9));import{config}from'./config.js';const PROTOCOL_VERSION='1.0.0',GAME_MESSAGE_TYPES={'SCORE_UPDATE':'scoreUpdate','GAME_OVER':a0_0x169eac(0x12d),'LEVEL_COMPLETED':a0_0x169eac(0xd1),'REQUEST_FULLSCREEN':a0_0x169eac(0x6a),'LOG':a0_0x169eac(0x71),'READY':'ready','RESET_SESSION':'resetSession','GAME_STARTED':a0_0x169eac(0x13c),'SAVE_PROGRESS':a0_0x169eac(0x1ba),'LOAD_PROGRESS':a0_0x169eac(0x18b)},PLATFORM_MESSAGE_TYPES={'START':a0_0x169eac(0x69),'PAUSE':'pause','RESUME':'resume','EXIT':a0_0x169eac(0x186),'CONFIG':a0_0x169eac(0x146)};export default class RuntimeShell{constructor(_0x4aab8a,_0x50d260,_0x39689d={}){const _0x8af0f2=a0_0x169eac,_0x40dce6={'AkyOG':_0x8af0f2(0x1ad),'DkZHr':_0x8af0f2(0x10e),'nLLvm':_0x8af0f2(0x150)};this[_0x8af0f2(0x177)]=_0x4aab8a,this[_0x8af0f2(0x70)]=_0x50d260;const _0x3af065=window['ENV']?.[_0x8af0f2(0xb2)]||window[_0x8af0f2(0x187)]['origin'],_0x3fec96=[window[_0x8af0f2(0x187)][_0x8af0f2(0x9f)],_0x3af065,_0x40dce6[_0x8af0f2(0x17b)],_0x40dce6[_0x8af0f2(0x155)]];this[_0x8af0f2(0x146)]={'allowedOrigins':_0x39689d[_0x8af0f2(0xaf)]||_0x3fec96,'debug':_0x39689d[_0x8af0f2(0x109)]||![],'timeout':_0x39689d[_0x8af0f2(0x184)]||0x7530},this['sessionId']=null,this[_0x8af0f2(0x108)]=null,this[_0x8af0f2(0x8a)]=0x0,this[_0x8af0f2(0xd7)]={'isReady':![],'isPaused':![],'score':0x0,'level':0x1,'isGameOver':![]},this[_0x8af0f2(0x87)]=!![],this['eventHandlers']=new Map(),this[_0x8af0f2(0x10b)]=[],this[_0x8af0f2(0xf7)]=this['handleMessage']['bind'](this),this[_0x8af0f2(0x71)](_0x40dce6[_0x8af0f2(0xd4)],_0x50d260);}[a0_0x169eac(0xe6)](){const _0x30abb7=a0_0x169eac,_0x2d70ba={'QKHiX':_0x30abb7(0x137),'VCcIX':function(_0x27fcf7,_0x46ba07,_0x18ed6c){return _0x27fcf7(_0x46ba07,_0x18ed6c);},'varGc':'message','oPdrb':'load','zBCaM':_0x30abb7(0x188)};window['addEventListener'](_0x2d70ba['varGc'],this[_0x30abb7(0xf7)]),this[_0x30abb7(0x177)]['addEventListener'](_0x2d70ba[_0x30abb7(0x156)],()=>{const _0x45e203=_0x30abb7;this['log'](_0x2d70ba[_0x45e203(0x86)]),_0x2d70ba[_0x45e203(0x19d)](setTimeout,()=>{const _0x5d4f8d=_0x45e203;this[_0x5d4f8d(0x158)]();},0x1f4);}),this['log'](_0x2d70ba[_0x30abb7(0x113)]);}[a0_0x169eac(0xf0)](_0xf197dc){const _0x3519bc=a0_0x169eac,_0x36aa43={'anstz':_0x3519bc(0x193),'cCikm':function(_0xcbcd2b,_0x36866c){return _0xcbcd2b===_0x36866c;},'oNASW':_0x3519bc(0x183),'DsRIJ':_0x3519bc(0x6b),'cflNF':_0x3519bc(0x19f),'UtIHF':_0x3519bc(0x7b),'xgXYR':_0x3519bc(0x1a9)},_0x4dceda=_0xf197dc['data'];if(_0x4dceda&&typeof _0x4dceda===_0x3519bc(0x199)&&(_0x36aa43['cCikm'](_0x4dceda[_0x3519bc(0x151)],_0x36aa43[_0x3519bc(0x73)])||_0x4dceda[_0x3519bc(0x151)]===_0x36aa43['DsRIJ']||_0x36aa43[_0x3519bc(0x17c)](_0x4dceda['name'],_0x36aa43[_0x3519bc(0xf1)])))return;if(!this[_0x3519bc(0xfb)](_0xf197dc[_0x3519bc(0x9f)])){this['log']('Rejected\x20message\x20from\x20invalid\x20origin:',_0xf197dc['origin']);return;}if(!this[_0x3519bc(0xe5)](_0x4dceda)){this[_0x3519bc(0x71)](_0x36aa43[_0x3519bc(0xec)],_0x4dceda);return;}this[_0x3519bc(0x71)](_0x3519bc(0x169),_0x4dceda);switch(_0x4dceda[_0x3519bc(0xff)]){case GAME_MESSAGE_TYPES[_0x3519bc(0x111)]:this[_0x3519bc(0xa1)](_0x4dceda[_0x3519bc(0x82)]);break;case GAME_MESSAGE_TYPES[_0x3519bc(0x11e)]:this[_0x3519bc(0x94)](_0x4dceda[_0x3519bc(0x82)]);break;case GAME_MESSAGE_TYPES[_0x3519bc(0x176)]:this[_0x3519bc(0x172)](_0x4dceda['payload']);break;case GAME_MESSAGE_TYPES[_0x3519bc(0x105)]:this[_0x3519bc(0xc4)](_0x4dceda[_0x3519bc(0x82)]);break;case GAME_MESSAGE_TYPES['REQUEST_FULLSCREEN']:this[_0x3519bc(0x10c)]();break;case GAME_MESSAGE_TYPES[_0x3519bc(0x123)]:break;case GAME_MESSAGE_TYPES[_0x3519bc(0x93)]:this[_0x3519bc(0x18d)]()[_0x3519bc(0x170)](()=>{this['log'](_0x36aa43['anstz']);});break;case GAME_MESSAGE_TYPES[_0x3519bc(0x7a)]:this['log'](_0x36aa43['UtIHF']);if(!this[_0x3519bc(0x1ce)])this[_0x3519bc(0x14f)]();else{}break;case GAME_MESSAGE_TYPES[_0x3519bc(0x16d)]:this[_0x3519bc(0xac)](_0x4dceda[_0x3519bc(0x82)]);break;case GAME_MESSAGE_TYPES[_0x3519bc(0xd6)]:this[_0x3519bc(0x90)](_0x4dceda[_0x3519bc(0x82)]);break;default:this[_0x3519bc(0x71)](_0x36aa43[_0x3519bc(0xe7)],_0x4dceda[_0x3519bc(0xff)]);}this['emit'](_0x4dceda[_0x3519bc(0xff)],_0x4dceda[_0x3519bc(0x82)]);}[a0_0x169eac(0xfb)](_0x2c39ff){const _0x15f809=a0_0x169eac;if(this[_0x15f809(0x146)]['allowedOrigins']['includes']('*'))return!![];const _0x3c1b09=this[_0x15f809(0x146)][_0x15f809(0xaf)][_0x15f809(0xdb)](_0x2c39ff);if(!_0x3c1b09){}return _0x3c1b09;}[a0_0x169eac(0xe5)](_0x5c4322){const _0x46ec2c=a0_0x169eac,_0x12e49c={'ZAMmI':_0x46ec2c(0x199),'KhQFG':function(_0x32350d,_0x481e1a){return _0x32350d===_0x481e1a;},'KQwlx':_0x46ec2c(0x181),'zxvHi':function(_0x2917b9,_0x48672d){return _0x2917b9===_0x48672d;}};return _0x5c4322&&typeof _0x5c4322===_0x12e49c['ZAMmI']&&_0x12e49c[_0x46ec2c(0x131)](typeof _0x5c4322['type'],_0x12e49c[_0x46ec2c(0x145)])&&_0x12e49c[_0x46ec2c(0x119)](_0x5c4322[_0x46ec2c(0xb4)],PROTOCOL_VERSION);}[a0_0x169eac(0xa1)](_0x1b20d0){const _0x5925f6=a0_0x169eac,_0x193efb={'jlaJW':_0x5925f6(0x136),'WeFue':_0x5925f6(0x1b3)},_0x3e7af5=_0x193efb[_0x5925f6(0x98)][_0x5925f6(0xc6)]('|');let _0x4fdf19=0x0;while(!![]){switch(_0x3e7af5[_0x4fdf19++]){case'0':this[_0x5925f6(0x71)](_0x5925f6(0x117),_0x1b20d0);continue;case'1':this[_0x5925f6(0x71)](_0x193efb[_0x5925f6(0x197)]);continue;case'2':this['start']();continue;case'3':this[_0x5925f6(0x174)]();continue;case'4':this[_0x5925f6(0xd7)]['isReady']=!![];continue;}break;}}[a0_0x169eac(0x94)](_0x259d41){const _0x21e3b8=a0_0x169eac,_0x27cf32={'uaKdX':function(_0x3235b4,_0x3e3571){return _0x3235b4===_0x3e3571;},'inWYE':_0x21e3b8(0x15d),'UfOgH':_0x21e3b8(0x1aa)};if(_0x259d41&&_0x27cf32[_0x21e3b8(0x166)](typeof _0x259d41[_0x21e3b8(0x17d)],_0x27cf32[_0x21e3b8(0xa5)])){const _0x147c90=this[_0x21e3b8(0xd7)][_0x21e3b8(0x139)]&&_0x259d41[_0x21e3b8(0x17d)]===0x0;_0x147c90&&(this[_0x21e3b8(0x71)](_0x21e3b8(0xfd)),this[_0x21e3b8(0x87)]&&!this[_0x21e3b8(0x1ce)]?(this['log'](_0x27cf32[_0x21e3b8(0x1bd)]),this['needsNewSession']=![],this['state'][_0x21e3b8(0x139)]=![],this[_0x21e3b8(0x14f)]()):this['state'][_0x21e3b8(0x139)]=![]),this[_0x21e3b8(0xd7)]['score']=_0x259d41[_0x21e3b8(0x17d)],this[_0x21e3b8(0x9c)](_0x259d41[_0x21e3b8(0x17d)]);}}[a0_0x169eac(0x172)](_0x44bf2d){const _0x3f7e64=a0_0x169eac,_0x21d753={'nvloj':_0x3f7e64(0x13b),'MROOw':_0x3f7e64(0x1a7),'fuNor':'ðŸ†”\x20Current\x20sessionId:','bBHHp':function(_0x8c5d50,_0x4b9bcd){return _0x8c5d50!==_0x4b9bcd;},'ryZzy':function(_0x76746b,_0x318f04){return _0x76746b!==_0x318f04;},'SZthk':function(_0x38dd28,_0x4e187c){return _0x38dd28!==_0x4e187c;},'xzPxh':function(_0x1c4d8b,_0x37cb5c){return _0x1c4d8b!==_0x37cb5c;},'aRYnl':'ðŸ’€\x20Game\x20Over!\x20Final\x20score:','kCaVt':_0x3f7e64(0x178),'zBpbb':_0x3f7e64(0x110)};this[_0x3f7e64(0x71)](_0x21d753[_0x3f7e64(0x1af)],_0x44bf2d),this['log'](_0x21d753[_0x3f7e64(0x153)],this[_0x3f7e64(0xd7)]['score']),this['log'](_0x21d753[_0x3f7e64(0x107)],this['sessionId']),this[_0x3f7e64(0x71)](_0x3f7e64(0xc0),this[_0x3f7e64(0x108)]);const _0x5c56fc=_0x44bf2d?.[_0x3f7e64(0x17d)]??this[_0x3f7e64(0xd7)][_0x3f7e64(0x17d)]??0x0;this[_0x3f7e64(0xd7)][_0x3f7e64(0x17d)]=_0x5c56fc;const _0x58dacd=_0x44bf2d?.['extra_data']||_0x44bf2d?.[_0x3f7e64(0x144)]||{};if(_0x44bf2d){if(_0x21d753[_0x3f7e64(0x1b4)](_0x44bf2d['kills'],undefined)&&!_0x58dacd['kills'])_0x58dacd[_0x3f7e64(0x96)]=_0x44bf2d['kills'];if(_0x21d753[_0x3f7e64(0x1b4)](_0x44bf2d[_0x3f7e64(0x1b7)],undefined)&&!_0x58dacd['time'])_0x58dacd[_0x3f7e64(0x1b7)]=_0x44bf2d['time'];if(_0x21d753[_0x3f7e64(0xae)](_0x44bf2d['level'],undefined)&&!_0x58dacd['level'])_0x58dacd['level']=_0x44bf2d[_0x3f7e64(0x89)];if(_0x21d753[_0x3f7e64(0xae)](_0x44bf2d[_0x3f7e64(0x6d)],undefined)&&!_0x58dacd[_0x3f7e64(0x6d)])_0x58dacd[_0x3f7e64(0x6d)]=_0x44bf2d[_0x3f7e64(0x6d)];if(_0x21d753[_0x3f7e64(0x9b)](_0x44bf2d[_0x3f7e64(0x97)],undefined)&&!_0x58dacd[_0x3f7e64(0x97)])_0x58dacd[_0x3f7e64(0x97)]=_0x44bf2d[_0x3f7e64(0x97)];if(_0x21d753['xzPxh'](_0x44bf2d[_0x3f7e64(0x11f)],undefined)&&!_0x58dacd[_0x3f7e64(0x11f)])_0x58dacd[_0x3f7e64(0x11f)]=_0x44bf2d['player_level'];}this['log'](_0x21d753[_0x3f7e64(0xd5)],this[_0x3f7e64(0xd7)]['score']),this[_0x3f7e64(0x71)](_0x21d753['kCaVt'],_0x58dacd),this[_0x3f7e64(0x164)](this[_0x3f7e64(0xd7)][_0x3f7e64(0x17d)]);if(this[_0x3f7e64(0x1ce)]){this['log'](_0x21d753[_0x3f7e64(0x154)],this[_0x3f7e64(0x1ce)]);const _0x58c582=this[_0x3f7e64(0x1ce)],_0x4371f9=this['sessionStartTime'];this[_0x3f7e64(0x1ce)]=null,this[_0x3f7e64(0x108)]=null,this[_0x3f7e64(0x7f)](_0x58c582,this[_0x3f7e64(0xd7)][_0x3f7e64(0x17d)],_0x4371f9,![],_0x58dacd),this[_0x3f7e64(0xd7)]['isGameOver']=!![],this['needsNewSession']=!![];}else this[_0x3f7e64(0x71)](_0x3f7e64(0x19a)),this['state']['isGameOver']=!![],this['needsNewSession']=!![];}['handleLevelCompleted'](_0x5a31af){const _0xe359e6=a0_0x169eac,_0x13ddba={'trwks':function(_0x2cad2d,_0x3bf107){return _0x2cad2d===_0x3bf107;}};_0x5a31af&&_0x13ddba['trwks'](typeof _0x5a31af[_0xe359e6(0x89)],_0xe359e6(0x15d))&&(this[_0xe359e6(0xd7)][_0xe359e6(0x89)]=_0x5a31af['level'],this[_0xe359e6(0x71)](_0xe359e6(0x8f),_0x5a31af[_0xe359e6(0x89)]),this[_0xe359e6(0xe0)](_0x5a31af[_0xe359e6(0x89)]));}[a0_0x169eac(0x10c)](){const _0x330e61=a0_0x169eac,_0x526c76={'lRLkS':'.game-player','UcpOF':function(_0x3c5967,_0x49f3b2){return _0x3c5967===_0x49f3b2;},'yMgfS':function(_0x567e06,_0x9f1cb1){return _0x567e06>_0x9f1cb1;},'sBdSX':'ios-fullscreen','uVrma':function(_0x44f21a,_0x4633f5){return _0x44f21a||_0x4633f5;},'IeNeA':function(_0x2ac7b8,_0x5252c8){return _0x2ac7b8&&_0x5252c8;},'oQyru':'Exiting\x20native\x20fullscreen','qmFDG':_0x330e61(0xdf)},_0x2755bd=this[_0x330e61(0x177)][_0x330e61(0xe2)],_0x41e501=document['querySelector'](_0x526c76[_0x330e61(0x16c)]),_0x2a4204=_0x41e501||_0x2755bd,_0x49990f=/iPad|iPhone|iPod/['test'](navigator[_0x330e61(0x88)])&&!window[_0x330e61(0x1a3)],_0x29c26b=_0x526c76['UcpOF'](navigator['platform'],_0x330e61(0x120))&&_0x526c76[_0x330e61(0xa7)](navigator[_0x330e61(0x9a)],0x1),_0x1fc402=/^((?!chrome|android).)*safari/i[_0x330e61(0x1d6)](navigator[_0x330e61(0x88)]),_0x5af327=document[_0x330e61(0x116)]||document[_0x330e61(0x100)]||document['msFullscreenEnabled'],_0x954def=document['fullscreenElement']||document['webkitFullscreenElement']||document[_0x330e61(0x76)],_0x3581f8=_0x2a4204['classList'][_0x330e61(0xb3)](_0x526c76[_0x330e61(0xe9)]);if(_0x526c76['uVrma'](_0x49990f,_0x29c26b)&&!_0x5af327)this[_0x330e61(0x127)](_0x2755bd,_0x41e501);else{if(_0x526c76[_0x330e61(0x8c)](_0x1fc402,!_0x5af327))this[_0x330e61(0x127)](_0x2755bd,_0x41e501);else{if(_0x954def){this['log'](_0x526c76['oQyru']);if(document['exitFullscreen'])document[_0x330e61(0x112)]();else{if(document[_0x330e61(0x141)])document[_0x330e61(0x141)]();else document['msExitFullscreen']&&document[_0x330e61(0x1c9)]();}}else{if(_0x3581f8)this[_0x330e61(0xbb)](_0x2a4204);else{this[_0x330e61(0x71)](_0x526c76['qmFDG']);if(_0x2a4204[_0x330e61(0x103)])_0x2a4204[_0x330e61(0x103)]();else{if(_0x2a4204[_0x330e61(0xd9)])_0x2a4204[_0x330e61(0xd9)]();else _0x2a4204['msRequestFullscreen']?_0x2a4204[_0x330e61(0xd0)]():this['enableIOSFullscreenFallback'](_0x2755bd,_0x41e501);}}}}}}['enableIOSFullscreenFallback'](_0x20e6f1,_0xca10ac){const _0x22fe37=a0_0x169eac,_0x554c5b={'zkwyy':function(_0x2b3ef1,_0x41b9b2){return _0x2b3ef1||_0x41b9b2;},'qHTVJ':'ios-fullscreen'},_0x4762d=_0x554c5b[_0x22fe37(0x1b5)](_0xca10ac,_0x20e6f1),_0x49aaac=_0x4762d[_0x22fe37(0x1bb)][_0x22fe37(0xb3)](_0x554c5b['qHTVJ']);_0x49aaac?this['exitIOSFullscreen'](_0x4762d):this[_0x22fe37(0x11a)](_0x4762d);}[a0_0x169eac(0x11a)](_0x4b585){const _0x3c8216=a0_0x169eac,_0x666df5={'zwWiN':_0x3c8216(0x122),'JCzXM':_0x3c8216(0x16a),'ULpbg':'hidden','PchoH':'.navbar','Wyikp':function(_0x3ae121,_0x54e8c0,_0x33b359){return _0x3ae121(_0x54e8c0,_0x33b359);},'jdczN':_0x3c8216(0x1d7)};_0x4b585['classList'][_0x3c8216(0x17f)](_0x666df5[_0x3c8216(0x18f)]),document['body'][_0x3c8216(0x1bb)][_0x3c8216(0x17f)](_0x666df5[_0x3c8216(0x10a)]),document[_0x3c8216(0x9e)][_0x3c8216(0x128)][_0x3c8216(0xb1)]=_0x666df5[_0x3c8216(0x6f)];const _0x10412c=document['querySelector'](_0x666df5[_0x3c8216(0x1c5)]);_0x10412c&&(_0x10412c[_0x3c8216(0x128)][_0x3c8216(0xb5)]='none'),this[_0x3c8216(0x1ca)](_0x4b585),_0x666df5[_0x3c8216(0x8d)](setTimeout,()=>{const _0x1d605d=_0x3c8216;window[_0x1d605d(0x179)](0x0,0x1);},0x64),this[_0x3c8216(0x71)](_0x666df5[_0x3c8216(0x182)]);}[a0_0x169eac(0xbb)](_0xa6c05b){const _0x3b8ba0=a0_0x169eac,_0x21a6b2={'JLEBP':_0x3b8ba0(0x122),'nuCQn':'ios-fullscreen-active','dEhqd':'Exited\x20iOS\x20fullscreen\x20mode'};_0xa6c05b[_0x3b8ba0(0x1bb)][_0x3b8ba0(0x1d5)](_0x21a6b2[_0x3b8ba0(0x140)]),document['body'][_0x3b8ba0(0x1bb)][_0x3b8ba0(0x1d5)](_0x21a6b2[_0x3b8ba0(0x185)]),document['body'][_0x3b8ba0(0x128)][_0x3b8ba0(0xb1)]='';const _0x5b31c0=document[_0x3b8ba0(0x195)](_0x3b8ba0(0xdd));_0x5b31c0&&(_0x5b31c0['style']['display']=''),this[_0x3b8ba0(0xfc)](),this[_0x3b8ba0(0x71)](_0x21a6b2[_0x3b8ba0(0xef)]);}[a0_0x169eac(0x1ca)](_0x1666e6){const _0x1c7cd1=a0_0x169eac,_0x571b38={'nrleB':_0x1c7cd1(0xe3),'OOvZu':_0x1c7cd1(0x1c2),'nJwQe':_0x1c7cd1(0x167),'vasxP':'Exit\x20fullscreen','YimeQ':_0x1c7cd1(0x12c)};this[_0x1c7cd1(0xfc)]();const _0xda124b=document[_0x1c7cd1(0x1a8)](_0x571b38[_0x1c7cd1(0xa3)]);_0xda124b['id']=_0x571b38[_0x1c7cd1(0x1cc)],_0xda124b['className']=_0x571b38['OOvZu'],_0xda124b[_0x1c7cd1(0x134)]='âœ•',_0xda124b[_0x1c7cd1(0x152)](_0x571b38[_0x1c7cd1(0x191)],_0x571b38[_0x1c7cd1(0xf3)]),_0xda124b['addEventListener'](_0x571b38[_0x1c7cd1(0x1a4)],_0x201180=>{const _0x433215=_0x1c7cd1;_0x201180[_0x433215(0x1a5)](),_0x201180['stopPropagation'](),this['exitIOSFullscreen'](_0x1666e6);}),document[_0x1c7cd1(0x9e)][_0x1c7cd1(0x142)](_0xda124b);}[a0_0x169eac(0xfc)](){const _0x8ea6c4=a0_0x169eac,_0x1cf17c={'TajQT':_0x8ea6c4(0x1c2)},_0x2ff33d=document[_0x8ea6c4(0x1d3)](_0x1cf17c['TajQT']);_0x2ff33d&&_0x2ff33d[_0x8ea6c4(0x1d5)]();}['handleLog'](_0x31732a){const _0x41fb4f=a0_0x169eac;if(_0x31732a&&_0x31732a[_0x41fb4f(0x121)]){}}[a0_0x169eac(0x148)](_0x35ff6c,_0x141890={}){const _0xc8d98f=a0_0x169eac,_0x4e3e33={'KfMrW':_0xc8d98f(0xa4),'Dxtun':_0xc8d98f(0x1c4)};if(!this[_0xc8d98f(0x177)]['contentWindow']){this[_0xc8d98f(0x71)](_0x4e3e33[_0xc8d98f(0xd3)]);return;}const _0x559f98={'type':_0x35ff6c,'payload':_0x141890,'timestamp':Date['now'](),'protocolVersion':PROTOCOL_VERSION,'gameId':this[_0xc8d98f(0x70)]};if(!this[_0xc8d98f(0xd7)][_0xc8d98f(0x1c0)]&&_0x35ff6c!==PLATFORM_MESSAGE_TYPES[_0xc8d98f(0x1b9)]){this[_0xc8d98f(0x71)](_0x4e3e33['Dxtun'],_0x35ff6c),this['messageQueue']['push'](_0x559f98);return;}this[_0xc8d98f(0x71)]('Sending\x20message\x20to\x20game:',_0x559f98),this[_0xc8d98f(0x177)][_0xc8d98f(0x8e)][_0xc8d98f(0xb8)](_0x559f98,'*');}['processMessageQueue'](){const _0x52eb63=a0_0x169eac,_0x4281bb={'JCdCv':_0x52eb63(0xc7),'izhct':function(_0x2b133a,_0x4bc668){return _0x2b133a>_0x4bc668;}};this[_0x52eb63(0x71)](_0x4281bb[_0x52eb63(0x7e)],this['messageQueue'][_0x52eb63(0x1d0)],_0x52eb63(0xf2));while(_0x4281bb['izhct'](this[_0x52eb63(0x10b)][_0x52eb63(0x1d0)],0x0)){const _0x2865eb=this[_0x52eb63(0x10b)]['shift']();this[_0x52eb63(0x177)][_0x52eb63(0x8e)]['postMessage'](_0x2865eb,'*');}}[a0_0x169eac(0x158)](){const _0x1a411f=a0_0x169eac;let _0x3744a6=null,_0x4b57de=null;if(window[_0x1a411f(0xc3)]&&window[_0x1a411f(0xc3)][_0x1a411f(0x1c6)]()){const _0x59a940=window['AuthManager'][_0x1a411f(0x12e)]();_0x3744a6=_0x59a940?.[_0x1a411f(0x85)]||null,_0x4b57de=_0x59a940?.[_0x1a411f(0x1b8)]||_0x59a940?.['account_name']||null;}this['sendMessage'](PLATFORM_MESSAGE_TYPES[_0x1a411f(0x1b9)],{'gameId':this[_0x1a411f(0x70)],'platformVersion':PROTOCOL_VERSION,'userId':_0x3744a6,'username':_0x4b57de,'features':{'scoreTracking':!![],'levelTracking':!![],'fullscreen':!![]}});}[a0_0x169eac(0x69)](){const _0x37cb1a=a0_0x169eac,_0x41a831={'UTHCQ':_0x37cb1a(0x83)};this['log'](_0x41a831['UTHCQ']),this['sendMessage'](PLATFORM_MESSAGE_TYPES[_0x37cb1a(0x1a1)],{'timestamp':Date[_0x37cb1a(0x14a)]()});}[a0_0x169eac(0x143)](){const _0x234255=a0_0x169eac,_0x282823={'PUIMy':_0x234255(0xb9),'zGIoa':_0x234255(0x1bc)},_0x5b07c5=_0x282823['PUIMy'][_0x234255(0xc6)]('|');let _0x26c7ae=0x0;while(!![]){switch(_0x5b07c5[_0x26c7ae++]){case'0':this['sendMessage'](PLATFORM_MESSAGE_TYPES[_0x234255(0x124)],{'timestamp':Date[_0x234255(0x14a)]()});continue;case'1':this[_0x234255(0xd7)][_0x234255(0x135)]=!![];continue;case'2':this[_0x234255(0x19b)]();continue;case'3':this[_0x234255(0x71)](_0x282823['zGIoa']);continue;case'4':if(this[_0x234255(0xd7)][_0x234255(0x135)])return;continue;}break;}}[a0_0x169eac(0xcc)](){const _0x323a23=a0_0x169eac,_0x5dfb73={'OTvhp':_0x323a23(0x115),'Lkjly':'Resuming\x20game'},_0x546d63=_0x5dfb73[_0x323a23(0xe4)]['split']('|');let _0x203d54=0x0;while(!![]){switch(_0x546d63[_0x203d54++]){case'0':this['hidePauseOverlay']();continue;case'1':this[_0x323a23(0xd7)][_0x323a23(0x135)]=![];continue;case'2':this[_0x323a23(0x71)](_0x5dfb73[_0x323a23(0xa0)]);continue;case'3':if(!this['state']['isPaused'])return;continue;case'4':this[_0x323a23(0x148)](PLATFORM_MESSAGE_TYPES['RESUME'],{'timestamp':Date['now']()});continue;}break;}}[a0_0x169eac(0x186)](){const _0x30c81c=a0_0x169eac,_0x5d7117={'zvQHF':_0x30c81c(0xfa),'gqNdN':_0x30c81c(0x122)};this[_0x30c81c(0x71)](_0x5d7117['zvQHF']),this['sendMessage'](PLATFORM_MESSAGE_TYPES[_0x30c81c(0x80)],{'timestamp':Date[_0x30c81c(0x14a)]()});const _0x223f96=this[_0x30c81c(0x177)][_0x30c81c(0xe2)];_0x223f96&&_0x223f96['classList'][_0x30c81c(0xb3)](_0x5d7117['gqNdN'])&&(_0x223f96['classList'][_0x30c81c(0x1d5)]('ios-fullscreen'),document[_0x30c81c(0x9e)]['style'][_0x30c81c(0xb1)]=''),this[_0x30c81c(0xce)](![],!![]);}['on'](_0x44c050,_0x114307){const _0x122649=a0_0x169eac;!this[_0x122649(0x18e)][_0x122649(0xea)](_0x44c050)&&this[_0x122649(0x18e)][_0x122649(0x13d)](_0x44c050,[]),this[_0x122649(0x18e)][_0x122649(0x15a)](_0x44c050)[_0x122649(0x194)](_0x114307);}[a0_0x169eac(0x1ae)](_0x13c089,_0x423fa5){const _0x514b8a=a0_0x169eac,_0x21d57f={'fMoXB':function(_0x1e93a6,_0x3d4598){return _0x1e93a6!==_0x3d4598;}};if(!this[_0x514b8a(0x18e)][_0x514b8a(0xea)](_0x13c089))return;const _0x1a26e5=this[_0x514b8a(0x18e)][_0x514b8a(0x15a)](_0x13c089),_0x1d91d5=_0x1a26e5[_0x514b8a(0x125)](_0x423fa5);_0x21d57f['fMoXB'](_0x1d91d5,-0x1)&&_0x1a26e5['splice'](_0x1d91d5,0x1);}[a0_0x169eac(0x147)](_0x287008,_0x56ea81){const _0x1ad7f2=a0_0x169eac,_0xf059fd={'CIMPd':function(_0xec3f7b,_0x21cc63){return _0xec3f7b(_0x21cc63);},'oxlls':_0x1ad7f2(0xcb)};if(!this[_0x1ad7f2(0x18e)][_0x1ad7f2(0xea)](_0x287008))return;const _0xd2433d=this['eventHandlers'][_0x1ad7f2(0x15a)](_0x287008);_0xd2433d[_0x1ad7f2(0xaa)](_0x2edc58=>{const _0x1df689=_0x1ad7f2;try{_0xf059fd['CIMPd'](_0x2edc58,_0x56ea81);}catch(_0x54f082){console[_0x1df689(0x12f)](_0xf059fd[_0x1df689(0x9d)],_0x54f082);}});}[a0_0x169eac(0x9c)](_0x391bae){const _0xb83f9=a0_0x169eac,_0x46c194={'BeGVk':_0xb83f9(0xab)},_0x343059=document[_0xb83f9(0x1d3)](_0x46c194[_0xb83f9(0x92)]);_0x343059&&(_0x343059['textContent']=_0x391bae);}[a0_0x169eac(0x19b)](){const _0x5ea7c6=a0_0x169eac,_0x245625={'cHjHG':_0x5ea7c6(0x12a),'COivA':_0x5ea7c6(0xf6),'XElQo':'var(--warning)'},_0x4f6ab2=document[_0x5ea7c6(0x195)](_0x245625[_0x5ea7c6(0xfe)]);_0x4f6ab2&&(_0x4f6ab2['textContent']=_0x245625[_0x5ea7c6(0x132)],_0x4f6ab2['style'][_0x5ea7c6(0x14b)]=_0x245625[_0x5ea7c6(0xf9)]);}['hidePauseOverlay'](){const _0x2b1403=a0_0x169eac,_0x165dad={'vLiPT':_0x2b1403(0x12a),'msYyA':_0x2b1403(0x1c3)},_0x5eb834=document['querySelector'](_0x165dad['vLiPT']);_0x5eb834&&(_0x5eb834[_0x2b1403(0xee)]=_0x2b1403(0x104),_0x5eb834[_0x2b1403(0x128)][_0x2b1403(0x14b)]=_0x165dad[_0x2b1403(0x1c7)]);}['showGameOverOverlay'](_0x456a41){const _0x245587=a0_0x169eac,_0x4c5406={'jNzdJ':_0x245587(0x12a)},_0x2e6c57=document[_0x245587(0x195)](_0x4c5406[_0x245587(0x1a2)]);_0x2e6c57&&(_0x2e6c57[_0x245587(0xee)]=_0x245587(0x173)+_0x456a41,_0x2e6c57[_0x245587(0x128)][_0x245587(0x14b)]=_0x245587(0x81));}['showLevelCompleteOverlay'](_0xdb4ac2){const _0x34f661=a0_0x169eac,_0x180c31={'IIZEh':_0x34f661(0x12a),'MPuWv':function(_0x2683aa,_0x2ffd42,_0xe202a2){return _0x2683aa(_0x2ffd42,_0xe202a2);}},_0x2d8d6=document[_0x34f661(0x195)](_0x180c31[_0x34f661(0x1ab)]);_0x2d8d6&&(_0x2d8d6[_0x34f661(0xee)]='Level\x20'+_0xdb4ac2+_0x34f661(0x10f),_0x2d8d6[_0x34f661(0x128)][_0x34f661(0x14b)]=_0x34f661(0x1c3),_0x180c31[_0x34f661(0x163)](setTimeout,()=>{const _0x1d80e7=_0x34f661;_0x2d8d6[_0x1d80e7(0xee)]=_0x1d80e7(0x104);},0xbb8));}['cleanup'](_0x1dda52=![],_0x1fdcc4=![]){const _0x525f6c=a0_0x169eac,_0x2b2e08={'bCXNO':_0x525f6c(0x1c1),'lgzDW':'Cleanup:\x20Skipping\x20session\x20end\x20(Exit\x20button\x20pressed\x20-\x20no\x20XP\x20awarded)','JWxrD':_0x525f6c(0x122),'pnutH':_0x525f6c(0x121)};if(this['sessionId']&&!_0x1fdcc4)this[_0x525f6c(0x71)](_0x2b2e08[_0x525f6c(0x18a)]),this[_0x525f6c(0x196)](_0x1dda52);else{if(this[_0x525f6c(0x1ce)]&&_0x1fdcc4)this[_0x525f6c(0x71)](_0x2b2e08[_0x525f6c(0xed)]),this['sessionId']=null,this[_0x525f6c(0x108)]=null;else{}}const _0x3420a2=this[_0x525f6c(0x177)]?.[_0x525f6c(0xe2)];_0x3420a2&&_0x3420a2['classList']['contains'](_0x2b2e08[_0x525f6c(0x1d2)])&&(_0x3420a2[_0x525f6c(0x1bb)]['remove']('ios-fullscreen'),document[_0x525f6c(0x9e)][_0x525f6c(0x128)]['overflow']=''),window[_0x525f6c(0x1be)](_0x2b2e08[_0x525f6c(0x198)],this[_0x525f6c(0xf7)]),this[_0x525f6c(0x18e)][_0x525f6c(0x1b6)](),this[_0x525f6c(0x10b)]=[],this[_0x525f6c(0x71)]('RuntimeShell\x20cleaned\x20up');}async['resetSession'](){const _0x305517=a0_0x169eac,_0x181e73={'BGglX':_0x305517(0x19c),'XuJQu':'ðŸŽ®\x20Starting\x20new\x20session\x20for\x20restart...'};this[_0x305517(0x71)](_0x181e73[_0x305517(0xc9)]);if(this[_0x305517(0x1ce)]){this['log']('âš ï¸\x20Warning:\x20Session\x20still\x20active\x20during\x20restart.\x20Ending\x20it\x20now:',this['sessionId']);const _0x31c60b=this[_0x305517(0x1ce)],_0x271c23=this['state'][_0x305517(0x17d)],_0x5e110a=this[_0x305517(0x108)];this[_0x305517(0x1ce)]=null,this[_0x305517(0x108)]=null,await this['endGameSessionById'](_0x31c60b,_0x271c23,_0x5e110a,![]);}else this[_0x305517(0x71)](_0x305517(0x72));this['state'][_0x305517(0x17d)]=0x0,this[_0x305517(0xd7)][_0x305517(0x139)]=![],this['needsNewSession']=![],this[_0x305517(0x71)](_0x181e73[_0x305517(0x133)]),await this[_0x305517(0x14f)]();}async['startGameSession'](){const _0x25b9c8=a0_0x169eac,_0x4633cc={'ogtWy':'ðŸŽ®\x20startGameSession()\x20called','OoYoU':function(_0x20b713,_0x295ff6){return _0x20b713===_0x295ff6;},'ozkKu':_0x25b9c8(0x15c),'ePaQF':_0x25b9c8(0x1cf),'CFJpt':_0x25b9c8(0x79),'AGLlJ':_0x25b9c8(0xde),'XvkXh':_0x25b9c8(0xcd),'gUeBE':function(_0x1a6a75,_0x4055f4,_0x526e4e){return _0x1a6a75(_0x4055f4,_0x526e4e);},'rQxNp':_0x25b9c8(0x157),'oxnMV':_0x25b9c8(0xbe),'lyBRZ':_0x25b9c8(0x78),'sMswx':_0x25b9c8(0x1cd),'LfjFP':'âŒ\x20Failed\x20to\x20start\x20session:','wmAZp':_0x25b9c8(0x11c)};this[_0x25b9c8(0x71)](_0x4633cc['ogtWy']);try{if(_0x4633cc[_0x25b9c8(0xa2)](typeof config,_0x4633cc[_0x25b9c8(0x7d)])||!config['API_URL']){this[_0x25b9c8(0x71)](_0x4633cc[_0x25b9c8(0xb7)]);return;}const _0x57501e=JSON[_0x25b9c8(0x15b)](localStorage[_0x25b9c8(0x165)](_0x4633cc[_0x25b9c8(0x6c)]));this[_0x25b9c8(0x71)]('Current\x20user\x20from\x20localStorage:',_0x57501e?_0x57501e['user_id']:_0x25b9c8(0x1d8));if(!_0x57501e){this[_0x25b9c8(0x71)](_0x4633cc[_0x25b9c8(0x168)]);return;}this[_0x25b9c8(0x71)](_0x4633cc[_0x25b9c8(0x1a0)],config['API_URL']);const _0x557fe6=await _0x4633cc['gUeBE'](fetch,config[_0x25b9c8(0xb2)]+_0x25b9c8(0x13e),{'method':_0x4633cc[_0x25b9c8(0x189)],'headers':{'Content-Type':_0x4633cc[_0x25b9c8(0xb6)]},'body':JSON[_0x25b9c8(0x6e)]({'user_id':_0x57501e[_0x25b9c8(0x85)],'game_id':this[_0x25b9c8(0x70)]})});this[_0x25b9c8(0x71)](_0x4633cc['lyBRZ'],_0x557fe6[_0x25b9c8(0x180)]);const _0x11a09b=await _0x557fe6[_0x25b9c8(0x7c)]();this[_0x25b9c8(0x71)](_0x25b9c8(0x1d9),_0x11a09b),_0x11a09b['success']?(this[_0x25b9c8(0x1ce)]=_0x11a09b['session'][_0x25b9c8(0xbf)],this[_0x25b9c8(0x108)]=Date[_0x25b9c8(0x14a)](),this[_0x25b9c8(0x71)](_0x4633cc[_0x25b9c8(0x8b)],this[_0x25b9c8(0x1ce)])):this[_0x25b9c8(0x71)](_0x4633cc[_0x25b9c8(0xeb)],_0x11a09b);}catch(_0x5de337){this[_0x25b9c8(0x71)](_0x4633cc['wmAZp'],_0x5de337);}}async[a0_0x169eac(0xac)](_0x5ecfa5){const _0x4430c8=a0_0x169eac,_0x11322f={'JlQbx':_0x4430c8(0x79),'XFSDc':'âŒ\x20No\x20user,\x20cannot\x20save\x20progress','YqrKk':'âŒ\x20No\x20API_URL','FPFSr':function(_0xcf6eab,_0x2a8dad,_0x13f62c){return _0xcf6eab(_0x2a8dad,_0x13f62c);},'TjnCz':_0x4430c8(0x129),'Kibey':_0x4430c8(0xbe),'akluY':_0x4430c8(0xf8),'JkzGE':'âŒ\x20Save\x20progress\x20failed','HRBdj':_0x4430c8(0x190)};try{const _0x2696ba=JSON[_0x4430c8(0x15b)](localStorage[_0x4430c8(0x165)](_0x11322f[_0x4430c8(0x1d1)]));if(!_0x2696ba){this[_0x4430c8(0x71)](_0x11322f[_0x4430c8(0xb0)]);return;}if(typeof config==='undefined'||!config[_0x4430c8(0xb2)]){this['log'](_0x11322f['YqrKk']);return;}const _0x103033=await _0x11322f[_0x4430c8(0xbd)](fetch,config[_0x4430c8(0xb2)]+_0x4430c8(0x14d)+_0x2696ba['user_id']+'/'+this['gameId'],{'method':_0x11322f[_0x4430c8(0x118)],'headers':{'Content-Type':_0x11322f[_0x4430c8(0x74)]},'body':JSON['stringify']({'progress_data':_0x5ecfa5['progress_data']})}),_0x37ba88=await _0x103033['json']();this[_0x4430c8(0x71)](_0x37ba88['success']?_0x11322f[_0x4430c8(0x1b2)]:_0x11322f['JkzGE'],_0x37ba88);}catch(_0x464ac5){this['log'](_0x11322f['HRBdj'],_0x464ac5);}}async['handleLoadProgress'](_0x21b7ad){const _0x519bd6=a0_0x169eac,_0x16cff6={'ZXdJJ':_0x519bd6(0x79),'RmUhU':function(_0x1730dd,_0x2b0f37){return _0x1730dd===_0x2b0f37;},'kmvQb':'undefined','jOpmy':function(_0x3af6ca,_0x3d59b8){return _0x3af6ca(_0x3d59b8);}};try{const _0x2bd916=JSON[_0x519bd6(0x15b)](localStorage[_0x519bd6(0x165)](_0x16cff6['ZXdJJ']));if(!_0x2bd916){this[_0x519bd6(0x16f)](_0x21b7ad[_0x519bd6(0xbc)],null);return;}if(_0x16cff6[_0x519bd6(0x162)](typeof config,_0x16cff6['kmvQb'])||!config['API_URL']){this[_0x519bd6(0x16f)](_0x21b7ad[_0x519bd6(0xbc)],null);return;}const _0x2b6db0=await _0x16cff6[_0x519bd6(0x106)](fetch,config[_0x519bd6(0xb2)]+_0x519bd6(0x14d)+_0x2bd916[_0x519bd6(0x85)]+'/'+this[_0x519bd6(0x70)]),_0x52a0c4=await _0x2b6db0[_0x519bd6(0x7c)]();_0x52a0c4[_0x519bd6(0x171)]&&_0x52a0c4['progress']?this[_0x519bd6(0x16f)](_0x21b7ad['_requestId'],_0x52a0c4[_0x519bd6(0x13a)][_0x519bd6(0x84)]):this[_0x519bd6(0x16f)](_0x21b7ad[_0x519bd6(0xbc)],null);}catch(_0x31491f){this[_0x519bd6(0x71)](_0x519bd6(0x17e),_0x31491f),this[_0x519bd6(0x16f)](_0x21b7ad[_0x519bd6(0xbc)],null);}}[a0_0x169eac(0x16f)](_0x25ea0,_0x254b40){const _0x3e6055=a0_0x169eac,_0x1b944a={'FmamF':_0x3e6055(0xa9)};if(!this['iframe']||!this[_0x3e6055(0x177)][_0x3e6055(0x8e)])return;this['iframe'][_0x3e6055(0x8e)]['postMessage']({'type':_0x1b944a[_0x3e6055(0xad)],'payload':{'_requestId':_0x25ea0,'progress_data':_0x254b40},'protocolVersion':PROTOCOL_VERSION,'timestamp':Date['now']()},'*');}async[a0_0x169eac(0x196)](_0x3fed99=![]){const _0x2143e6=a0_0x169eac;if(!this[_0x2143e6(0x1ce)])return;const _0x527675=this[_0x2143e6(0x1ce)],_0x1f8d2d=this[_0x2143e6(0xd7)]['score'],_0x1f64e4=this[_0x2143e6(0x108)];this[_0x2143e6(0x1ce)]=null,this[_0x2143e6(0x108)]=null,await this[_0x2143e6(0x7f)](_0x527675,_0x1f8d2d,_0x1f64e4,_0x3fed99);}async[a0_0x169eac(0x7f)](_0x50fa1c,_0x48c1ce,_0x13e47d,_0x7ac6bb=![],_0x502d16=null){const _0x2a1ea3=a0_0x169eac,_0x55bb93={'YdkYt':function(_0x1c73fd,_0x1418f4){return _0x1c73fd/_0x1418f4;},'YPfIn':function(_0x3a4200,_0x71e6df){return _0x3a4200-_0x71e6df;},'ktFoQ':function(_0xfb7562,_0x54992b){return _0xfb7562===_0x54992b;},'mQNrf':_0x2a1ea3(0x15d),'KkSvm':_0x2a1ea3(0x1ac),'FCjWg':_0x2a1ea3(0xc8),'ueWFs':function(_0x5ea36f,_0x1c12b3){return _0x5ea36f||_0x1c12b3;},'HIWyT':_0x2a1ea3(0x1b0),'DsJvG':function(_0x4f9f48,_0x577364,_0x1bbb3b){return _0x4f9f48(_0x577364,_0x1bbb3b);},'qyJtz':_0x2a1ea3(0xbe),'MjWwO':_0x2a1ea3(0x1c8),'BEnjL':'Backend\x20response\x20data:','dvwyq':_0x2a1ea3(0x1b1),'kFmZH':_0x2a1ea3(0xba)};if(!_0x50fa1c)return;try{const _0x4f2fdd=Math[_0x2a1ea3(0x114)](_0x55bb93[_0x2a1ea3(0x101)](_0x55bb93[_0x2a1ea3(0x99)](Date['now'](),_0x13e47d),0x3e8))||0x0,_0x35b673=_0x55bb93[_0x2a1ea3(0xf4)](typeof _0x48c1ce,_0x55bb93[_0x2a1ea3(0x138)])?Math[_0x2a1ea3(0x114)](_0x48c1ce):0x0;this['log'](_0x2a1ea3(0x12b),_0x50fa1c,_0x55bb93[_0x2a1ea3(0xda)],_0x35b673,_0x55bb93['FCjWg'],_0x4f2fdd);const _0x3ba165={'session_id':_0x50fa1c,'score':_0x35b673,'duration_seconds':_0x4f2fdd,'extra_data':_0x55bb93[_0x2a1ea3(0x14c)](_0x502d16,{})};this[_0x2a1ea3(0x71)](_0x2a1ea3(0x19e),JSON[_0x2a1ea3(0x6e)](_0x3ba165));if(_0x7ac6bb&&navigator[_0x2a1ea3(0x75)]){const _0x5355dc=new Blob([JSON['stringify'](_0x3ba165)],{'type':_0x2a1ea3(0xbe)});navigator[_0x2a1ea3(0x75)](config[_0x2a1ea3(0xb2)]+_0x2a1ea3(0x14e),_0x5355dc),this[_0x2a1ea3(0x71)](_0x55bb93['HIWyT']);return;}const _0x26a42e=await _0x55bb93[_0x2a1ea3(0xca)](fetch,config[_0x2a1ea3(0xb2)]+_0x2a1ea3(0x14e),{'method':_0x2a1ea3(0x157),'headers':{'Content-Type':_0x55bb93[_0x2a1ea3(0xdc)]},'body':JSON[_0x2a1ea3(0x6e)](_0x3ba165)});this[_0x2a1ea3(0x71)](_0x55bb93[_0x2a1ea3(0x11d)],_0x26a42e[_0x2a1ea3(0x180)]);const _0x48f054=await _0x26a42e['json']();this[_0x2a1ea3(0x71)](_0x55bb93['BEnjL'],_0x48f054),_0x48f054[_0x2a1ea3(0x171)]&&(this[_0x2a1ea3(0x71)](_0x55bb93[_0x2a1ea3(0x192)],_0x48f054['session']),window[_0x2a1ea3(0xc3)]&&window[_0x2a1ea3(0xc3)]['updateCur8'](_0x48f054[_0x2a1ea3(0x160)]['xp_earned']),this[_0x2a1ea3(0xf5)](_0x48f054[_0x2a1ea3(0x160)][_0x2a1ea3(0x1cb)],_0x48f054[_0x2a1ea3(0x160)]),_0x48f054['session'][_0x2a1ea3(0x11b)]&&this[_0x2a1ea3(0x1a6)](_0x48f054['session'][_0x2a1ea3(0x11b)]),window[_0x2a1ea3(0xe1)](new CustomEvent(_0x2a1ea3(0x159),{'detail':{'session':_0x48f054[_0x2a1ea3(0x160)],'xp_earned':_0x48f054[_0x2a1ea3(0x160)][_0x2a1ea3(0x1cb)],'duration_seconds':_0x48f054[_0x2a1ea3(0x160)][_0x2a1ea3(0x1d4)]}})));}catch(_0x2ed92a){this[_0x2a1ea3(0x71)](_0x55bb93[_0x2a1ea3(0xc5)],_0x2ed92a);}}async[a0_0x169eac(0xf5)](_0xbfedfb,_0x5caa57=null){const _0x55b02b=a0_0x169eac,_0x324ad2={'aXthT':'showXPBanner'},_0x196850={'xp_earned':_0xbfedfb,'xp_breakdown':_0x5caa57?.[_0x55b02b(0x161)]||[],'extra_data':_0x5caa57?.['metadata']||_0x5caa57?.[_0x55b02b(0x17a)]||null};this['sendMessage'](_0x324ad2[_0x55b02b(0x15f)],_0x196850);}[a0_0x169eac(0x1a6)](_0x2d226c){const _0x35ba00=a0_0x169eac,_0x536403={'Dausp':function(_0x4b4221,_0x245bea){return _0x4b4221===_0x245bea;}},{old_level:_0x4ee69a,new_level:_0x28f772,title:_0x419b49,badge:_0x51a2eb,coins_awarded:_0xd3cebf,is_milestone:_0x23490f}=_0x2d226c,_0x264522=window[_0x35ba00(0xc3)]?.[_0x35ba00(0x79)],_0x3c4c50=_0x536403['Dausp'](_0x264522?.[_0x35ba00(0xa6)],!![]),_0x48685c={..._0x2d226c,'user_data':{'is_anonymous':_0x3c4c50}};this[_0x35ba00(0x148)]('showLevelUpModal',_0x48685c);}['getState'](){const _0x782737=a0_0x169eac;return{...this[_0x782737(0xd7)]};}[a0_0x169eac(0x71)](..._0x5e05b0){}}(function detectDevTools(){const _0x5ad08d={'tHPsi':function(_0x44ed49,_0x1459a3){return _0x44ed49>_0x1459a3;},'GVMln':function(_0x56af03,_0x242d47){return _0x56af03-_0x242d47;},'ukTCn':function(_0x51253e,_0x2cdbba){return _0x51253e>_0x2cdbba;},'KiNIG':function(_0x1cb9b0,_0x52762f){return _0x1cb9b0-_0x52762f;},'IVAux':function(_0x2eeb46){return _0x2eeb46();},'ZNOIi':function(_0x5781c3){return _0x5781c3();},'oBvKz':function(_0x1b6096,_0x33b80e){return _0x1b6096&&_0x33b80e;},'EPcTA':function(_0x16f5e4){return _0x16f5e4();},'pGaWv':function(_0x91932b,_0x597b11,_0x417dfb){return _0x91932b(_0x597b11,_0x417dfb);}};let _0x494cc=![];function _0x942404(){const _0x10cd03=a0_0x1e01,_0x2c883b=performance[_0x10cd03(0x14a)]();return _0x5ad08d[_0x10cd03(0x95)](_0x5ad08d[_0x10cd03(0x15e)](performance[_0x10cd03(0x14a)](),_0x2c883b),0x64);}function _0x1498b1(){const _0x92af28=a0_0x1e01;return _0x5ad08d['ukTCn'](_0x5ad08d[_0x92af28(0x16e)](window[_0x92af28(0x77)],window['innerWidth']),0xa0)||_0x5ad08d[_0x92af28(0x102)](_0x5ad08d[_0x92af28(0x15e)](window[_0x92af28(0x1bf)],window[_0x92af28(0xa8)]),0xa0);}_0x5ad08d['pGaWv'](setInterval,()=>{const _0x540872=a0_0x1e01,_0x3951c1=_0x5ad08d['IVAux'](_0x942404)||_0x5ad08d[_0x540872(0x126)](_0x1498b1);if(_0x5ad08d[_0x540872(0x68)](_0x3951c1,!_0x494cc))_0x494cc=!![],_0x5ad08d[_0x540872(0x175)](_0x2679e3);else!_0x3951c1&&(_0x494cc=![]);},0x3e8);function _0x2679e3(){const _0xd6871d=a0_0x1e01;window['runtimeShellInstance']&&(this[_0xd6871d(0x148)](GAME_MESSAGE_TYPES[_0xd6871d(0x176)],{'score':0x0,'extra_data':{}}),window[_0xd6871d(0xc2)][_0xd6871d(0xce)](![],!![]),window[_0xd6871d(0xc2)][_0xd6871d(0x186)]());}}());function a0_0x1e01(_0x4d1c55,_0x5cb5a9){_0x4d1c55=_0x4d1c55-0x68;const _0x536ae7=a0_0x536a();let _0x1e0132=_0x536ae7[_0x4d1c55];return _0x1e0132;}export{GAME_MESSAGE_TYPES,PLATFORM_MESSAGE_TYPES,PROTOCOL_VERSION};