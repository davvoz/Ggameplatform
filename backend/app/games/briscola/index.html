<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Briscola - Italian Card Game</title>
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Platform SDK -->
    <script src="/sdk/platformsdk.js"></script>
</head>

<body>
    <div id="game-container" class="game-container">
        <!-- Main Menu Screen -->
        <div id="menu-screen" class="screen active">
            <div class="menu-content">
                <h1 class="game-title">üÉè Briscola</h1>
                <p class="game-subtitle">Italian Card Game</p>
                
                <div class="menu-buttons">
                    <button class="menu-btn primary" data-mode="ai">
                        <span class="btn-icon">ü§ñ</span>
                        <span class="btn-text">Play vs AI</span>
                    </button>
                    <button class="menu-btn secondary" data-mode="online">
                        <span class="btn-icon">üåê</span>
                        <span class="btn-text">Multiplayer Online</span>
                    </button>
                </div>
                
                <div class="difficulty-selector" id="difficulty-selector" style="display: none;">
                    <h3>AI Difficulty</h3>
                    <div class="difficulty-buttons">
                        <button class="diff-btn" data-difficulty="easy">Easy</button>
                        <button class="diff-btn active" data-difficulty="medium">Medium</button>
                        <button class="diff-btn" data-difficulty="hard">Hard</button>
                    </div>
                </div>

                <div class="deck-selector" id="deck-selector">
                    <h3>üé¥ Choose Deck</h3>
                    <div class="deck-buttons">
                        <button class="deck-btn active" data-deck="">
                            <span class="deck-preview piacentino"></span>
                            <span class="deck-name">Piacentino</span>
                        </button>
                        <button class="deck-btn" data-deck="br">
                            <span class="deck-preview bresciano"></span>
                            <span class="deck-name">Bresciano</span>
                        </button>
                        <button class="deck-btn" data-deck="bo">
                            <span class="deck-preview bolognese"></span>
                            <span class="deck-name">Bolognese</span>
                        </button>
                    </div>
                </div>
                
                <div class="rules-link">
                    <button class="link-btn" id="show-rules">üìú Game Rules</button>
                </div>
            </div>
        </div>
        
        <!-- Online Lobby Screen -->
        <div id="lobby-screen" class="screen">
            <div class="lobby-content">
                <h2>üåê Multiplayer Online</h2>
                
                <div class="lobby-options">
                    <button class="lobby-btn" id="create-room">
                        <span class="btn-icon">‚ûï</span>
                        <span class="btn-text">Create Room</span>
                    </button>
                    <button class="lobby-btn" id="join-room">
                        <span class="btn-icon">üö™</span>
                        <span class="btn-text">Join</span>
                    </button>
                </div>
                
                <div id="room-code-display" class="room-code-display" style="display: none;">
                    <p>Room Code:</p>
                    <div class="room-code" id="room-code">XXXX</div>
                    <p class="waiting-text">Waiting for an opponent...</p>
                </div>
                
                <div id="join-room-form" class="join-room-form" style="display: none;">
                    <input type="text" id="room-input" placeholder="Enter code" maxlength="4">
                    <button class="join-btn" id="join-room-submit">Join</button>
                </div>
                
                <button class="back-btn" id="lobby-back">‚Üê Back to Menu</button>
            </div>
        </div>
        
        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <!-- Opponent Area -->
            <div class="opponent-area">
                <div class="opponent-info">
                    <div class="player-avatar opponent">
                        <span>ü§ñ</span>
                    </div>
                    <div class="opponent-details">
                        <span class="opponent-name" id="opponent-name">Opponent</span>
                        <div class="opponent-stats">
                            <span class="opponent-score">Points: <strong id="opponent-score">0</strong></span>
                            <span class="opponent-cards-count">Cards: <span id="opponent-cards">3</span></span>
                        </div>
                    </div>
                </div>
                <div id="opponent-hand" class="opponent-hand"></div>
            </div>

            <!-- Game Area -->
            <div class="game-area">
                <div class="deck-section">
                    <div id="deck-pile" class="deck-pile">
                        <div class="deck-card"></div>
                        <span id="deck-count" class="deck-count">33</span>
                    </div>
                </div>
                
                <div class="briscola-section">
                    <div class="briscola-container">
                        <div id="briscola-card" class="briscola-card"></div>
                        <div class="briscola-label">BRISCOLA</div>
                    </div>
                </div>
                
                <div class="play-section">
                    <div id="play-area" class="play-area">
                        <div id="played-cards" class="played-cards">
                            <div id="first-played" class="played-slot first">
                                <span class="slot-label">1¬∞</span>
                            </div>
                            <div id="second-played" class="played-slot second">
                                <span class="slot-label">2¬∞</span>
                            </div>
                        </div>
                    </div>
                    <div id="turn-indicator" class="turn-indicator">Your turn</div>
                </div>
            </div>

            <!-- Player Area -->
            <div class="player-area">
                <div id="player-hand" class="player-hand"></div>
                
                <div class="player-info-bar">
                    <div class="player-info self">
                        <div class="player-avatar">
                            <span>üë§</span>
                        </div>
                        <div class="player-details">
                            <span class="player-name" id="player-name">You</span>
                            <span class="player-score">Points: <strong id="player-score">0</strong></span>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button id="pause-btn" class="control-btn" title="Pausa">
                            <span>‚è∏Ô∏è</span>
                        </button>
                        <button id="sound-toggle" class="control-btn" title="Audio">
                            <span>üîä</span>
                        </button>
                        <button id="exit-btn" class="control-btn quit" title="Exit">
                            <span>üö™</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Game Over Screen -->
        <div id="gameover-screen" class="screen">
            <div class="gameover-content">
                <div class="gameover-header">
                    <div class="result-badge" id="result-badge">
                        <span class="badge-text">VICTORY</span>
                    </div>
                    <h2 class="gameover-title" id="gameover-title">Game Over</h2>
                </div>
                
                <div class="scoreboard">
                    <div class="score-card player1" id="score-card-1">
                        <div class="score-card-header">
                            <span class="score-player-name" id="go-player1">You</span>
                        </div>
                        <div class="score-card-value" id="go-score1">0</div>
                        <div class="score-card-label">POINTS</div>
                    </div>
                    
                    <div class="score-divider">
                        <span class="vs-text">VS</span>
                    </div>
                    
                    <div class="score-card player2" id="score-card-2">
                        <div class="score-card-header">
                            <span class="score-player-name" id="go-player2">Opponent</span>
                        </div>
                        <div class="score-card-value" id="go-score2">0</div>
                        <div class="score-card-label">POINTS</div>
                    </div>
                </div>
                
                <div class="winner-announcement" id="winner-announcement"></div>
                
                <div class="gameover-buttons">
                    <button class="gameover-btn primary" id="play-again">
                        <span class="btn-icon-svg">‚Üª</span>
                        Play Again
                    </button>
                    <button class="gameover-btn secondary" id="back-to-menu">
                        Main Menu
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Rules Modal -->
        <div id="rules-modal" class="modal">
            <div class="modal-content">
                <button class="modal-close" id="close-rules">√ó</button>
                <h2>üìú Briscola Rules</h2>
                <div class="rules-text">
                    <h3>Objective</h3>
                    <p>Reach the highest score by capturing high-value cards.</p>
                    
                    <h3>Card Values</h3>
                    <ul>
                        <li><strong>Ace:</strong> 11 points</li>
                        <li><strong>Three:</strong> 10 points</li>
                        <li><strong>King:</strong> 4 points</li>
                        <li><strong>Knight:</strong> 3 points</li>
                        <li><strong>Jack:</strong> 2 points</li>
                        <li><strong>7, 6, 5, 4, 2:</strong> 0 points</li>
                    </ul>
                    
                    <h3>Ranking Order</h3>
                    <p>Ace > Three > King > Knight > Jack > 7 > 6 > 5 > 4 > 2</p>
                    
                    <h3>How to Play</h3>
                    <ol>
                        <li>Each player receives 3 cards</li>
                        <li>One card is revealed: it's the Briscola (trump)</li>
                        <li>The first player plays a card</li>
                        <li>The opponent must respond</li>
                        <li>The strongest card wins</li>
                        <li>The winner draws first</li>
                        <li>Continue until all cards are played</li>
                    </ol>
                    
                    <h3>Who Wins the Hand?</h3>
                    <ul>
                        <li>Briscola (trump) always beats other suits</li>
                        <li>If no one plays Briscola, the lead suit wins</li>
                        <li>Between cards of the same suit, the strongest wins</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Pause Modal -->
        <div id="pause-modal" class="modal">
            <div class="modal-content pause-content">
                <h2>‚è∏Ô∏è Pause</h2>
                <div class="pause-buttons">
                    <button class="menu-btn primary" id="resume-game">‚ñ∂Ô∏è Resume</button>
                    <button class="menu-btn secondary" id="quit-game">üö™ Quit</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Game Scripts -->
    <script type="module" src="js/main.js"></script>
</body>

</html>
